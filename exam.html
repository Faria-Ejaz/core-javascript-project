<!DOCTYPE >
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1"
    />
    <title>javascript coding exam</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
  </head>
  <body>
    <div class="container">
      <h2>UIT Team JavaScript exam</h2>
      <form class="form-horizontal" role="form">
        <div class="form-group">
          <button
            onclick="arrangeRandomly()"
            id="start"
            type="button"
            class="btn btn-default"
          >
            start random
          </button>
          <button id="stop" type="button" class="btn btn-default">
            stop random
          </button>
          <button
            onclick="sortted()"
            id="sort"
            type="button"
            class="btn btn-default"
          >
            sort
          </button>
        </div>
      </form>
      <div class="contents">
        <table class="table">
          <thead>
            <tr>
              <th>Id</th>
              <th>Image</th>
              <th>Name</th>
              <th>Price</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </div>
    <script id="myJson" src="json/data.js"></script>
    <script>
      var tbody = document.getElementById("tbody");
      function getRandomArray(min, max) {
        var A = [];
        while (max >= min) A.push(max--);
        console.log("A: ", A);

        A.sort(function() {
          return 0.5 - Math.random();
        });
        return A;
      }
      function sortted() {
        while (tbody.firstChild) {
          tbody.removeChild(tbody.firstChild);
        }
        var B = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
        for (var j = 0; j < TABLE_DATA.length; j++) {
          for (var i = 0; i < TABLE_DATA.length; i++) {
            if (B[j] == parseInt(TABLE_DATA[i].id)) {
              var tr = document.createElement("TR");
              var th = document.createElement("TH");
              th.setAttribute("id", "id" + i);
              var th1 = document.createElement("TH");
              var img = document.createElement("IMG");
              img.setAttribute("id", "img" + i);
              var th2 = document.createElement("TH");
              th2.setAttribute("id", "name" + i);
              var th3 = document.createElement("TH");
              th3.setAttribute("id", "price" + i);

              th1.appendChild(img);
              tr.appendChild(th);
              tr.appendChild(th1);
              tr.appendChild(th2);
              tr.appendChild(th3);

              tbody.appendChild(tr);

              document.getElementById("id" + i).innerHTML = TABLE_DATA[i].id;
              document
                .getElementById("img" + i)
                .setAttribute("src", TABLE_DATA[i].thumbnailUrl);
              if (i != 4) {
                document.getElementById("name" + i).innerHTML =
                  TABLE_DATA[i].name;
              }
              document.getElementById("price" + i).innerHTML =
                TABLE_DATA[i].price;
            }
          }
        }
      }
      function arrangeRandomly() {
        var randomArray = [];

        while (tbody.firstChild) {
          tbody.removeChild(tbody.firstChild);
        }
        randomArray = getRandomArray(0, 9);

        randomArray.forEach(i => {
          var tr = document.createElement("TR");
          var th = document.createElement("TH");
          th.setAttribute("id", "id" + i);
          var th1 = document.createElement("TH");
          var img = document.createElement("IMG");
          img.setAttribute("id", "img" + i);
          var th2 = document.createElement("TH");
          th2.setAttribute("id", "name" + i);
          var th3 = document.createElement("TH");
          th3.setAttribute("id", "price" + i);

          th1.appendChild(img);
          tr.appendChild(th);
          tr.appendChild(th1);
          tr.appendChild(th2);
          tr.appendChild(th3);

          tbody.appendChild(tr);

          document.getElementById("id" + i).innerHTML = TABLE_DATA[i].id;

          document
            .getElementById("img" + i)
            .setAttribute("src", TABLE_DATA[i].thumbnailUrl);
          if (i != 4) {
            document.getElementById("name" + i).innerHTML = TABLE_DATA[i].name;
          }
          document.getElementById("price" + i).innerHTML = TABLE_DATA[i].price;
        });
      }
      for (var i = 0; i < TABLE_DATA.length; i++) {
        var tr = document.createElement("TR");
        var th = document.createElement("TH");
        th.setAttribute("id", "id" + i);
        var th1 = document.createElement("TH");
        var img = document.createElement("IMG");
        img.setAttribute("id", "img" + i);
        var th2 = document.createElement("TH");
        th2.setAttribute("id", "name" + i);
        var th3 = document.createElement("TH");
        th3.setAttribute("id", "price" + i);

        th1.appendChild(img);
        tr.appendChild(th);
        tr.appendChild(th1);
        tr.appendChild(th2);
        tr.appendChild(th3);

        tbody.appendChild(tr);

        document.getElementById("id" + i).innerHTML = TABLE_DATA[i].id;
        document
          .getElementById("img" + i)
          .setAttribute("src", TABLE_DATA[i].thumbnailUrl);
        if (i != 4) {
          document.getElementById("name" + i).innerHTML = TABLE_DATA[i].name;
        }
        document.getElementById("price" + i).innerHTML = TABLE_DATA[i].price;
      }
    </script>
    <script src="js/app.js"></script>
  </body>
</html>
